<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <link href="../../css/pygment_default.css" rel="stylesheet">
  <link href="../../css/main.css" rel="stylesheet">
  <link href="../../css/print.css" rel="stylesheet" media="print">

  <title>GDevelop Basics</title>
</head>

<body>
    <div id="header">
        <div id="header-left">
            <a id="home" href="../../index.html"><i class="fa fa-home"></i></a>
            &nbsp;&nbsp;/&nbsp;&nbsp;
            GDevelop Basics
        </div>
        <div id="header-right">
            <a href="https://aposteriori.com.sg">
                <img src="../../images/logo.png">
            </a>
        </div>
    </div>

    <div id="body">
        <div id="sidebarOverlay"></div>
        <nav id="sidebar" role="navigation">
            <div id="sidebarHeader">Basic game development using GDevelop</div>
            <p>Intro to GDevelop</p><ul><a href="../10-Intro/10-intro.html"><li >Introductions</li></a><a href="../10-Intro/20-gdevelop.html"><li >What is GDevelop?</li></a></ul><p>Dodge the Creep</p><ul><a href="../20-Dodge/10-dodge.html"><li >Dodge the Creep</li></a><a href="../20-Dodge/20-start.html"><li >Getting Started</li></a><a href="../20-Dodge/30-scene.html"><li >Scene Editor</li></a><a href="../20-Dodge/40-object.html"><li >First Object</li></a><a href="../20-Dodge/50-touch.html"><li >Touchscreen Controls</li></a><a href="../20-Dodge/60-events.html"><li >Events</li></a><a href="../20-Dodge/70-animation.html"><li >Animation</li></a><a href="../20-Dodge/80-enemies.html"><li >Enemies</li></a><a href="../20-Dodge/90-sides.html"><li >Four sides</li></a><a href="../20-Dodge/100-gameover.html"><li >Game Over</li></a><a href="../20-Dodge/110-collision.html"><li >Collision</li></a><a href="../20-Dodge/120-start.html"><li >Start Scene</li></a><a href="../20-Dodge/130-score.html"><li >Score</li></a><a href="../20-Dodge/140-sound.html"><li >Sound and Music</li></a><a href="../20-Dodge/150-difficulty.html"><li >Increasing Difficulty</li></a><a href="../20-Dodge/160-export.html"><li >Exporting the Game</li></a><a href="../20-Dodge/170-next.html"><li >What's Next?</li></a></ul><p>Gelda (RPG)</p><ul><a href="../30-Gelda/10-gelda.html"><li >Gelda (RPG)</li></a><a href="../30-Gelda/20-start.html"><li >Getting Started</li></a><a href="../30-Gelda/30-player.html"><li >Player</li></a><a href="../30-Gelda/40-touch.html"><li >Touchscreen Controls</li></a><a href="../30-Gelda/50-tiles.html"><li >Layers and Tiles</li></a><a href="../30-Gelda/60-world.html"><li >Game World</li></a><a href="../30-Gelda/70-npc.html"><li >Non-Player Characters</li></a><a href="../30-Gelda/80-princess.html"><li >Princess NPC</li></a><a href="../30-Gelda/90-monsters.html"><li >Monsters</li></a><a href="../30-Gelda/100-attacks.html"><li >Attacks</li></a><a href="../30-Gelda/110-dialog2.html"><li >Dialog (Part 2)</li></a><a href="../30-Gelda/120-startEnd.html"><li >Start and End Scenes</li></a><a href="../30-Gelda/130-sound.html"><li >Sound and Music</li></a><a href="../30-Gelda/140-fullscreen.html"><li >Fullscreen</li></a><a href="../30-Gelda/150-export.html"><li >Exporting the Game</li></a><a href="../30-Gelda/160-next.html"><li >What's Next?</li></a><a href="../30-Gelda/170-Monsters-Revisited.html"><li class="current">Monsters Revisited</li></a></ul>
        </nav>
        <div id="content">
            <h2>Monsters Revisited</h2>
<p>If you want to have different kinds of control over your monster that are not handled by the simple Rectangular Movement Behavior, consider using the technique described below to create various Monster paths or more belligirent behaviors.</p>
<h2>Pathfinding Behaviors</h2>
<p>If you want Monsters (or NPCs for that matter) to follow your player, you can use the Pathfinding Behavior:</p>
<p><img alt="" src="images/pathfinding.png" /></p>
<h3>Using Pathfinding Behavior</h3>
<p>Add <strong>Pathfinding</strong> behavior to Monster objects you want to be able to chase you, when they sense you're around.</p>
<p>The behavior's properties include the <em>max speed</em> and <em>acceleration</em> with which they will move towards your player.  There are other properties like making collisions with obstacles less forgiving, or making obstacles costly, but not insurmountable, but just setting the speed and acceleration should get you well and started.</p>
<h3>Obstacles</h3>
<p>If your monster is a ghost maybe you don't care that it can pass through walls that you can't, but for most normal monsters you want them to chase you but still avoid walls in their path to you.</p>
<p>Once you've added the Pathfinding behavior to your monster, you can easily mark the obstacles by adding the <strong>Obstacle for pathfinding</strong> behavior to elements in your base layer, like the Wall object.  And that's it!</p>
<h3>Triggering a Chase</h3>
<p>In your Events, add a new event with a condition checking that you are within some distance of the radius of the monster's senses:</p>
<p><img alt="" src="images/pathfindingChase.png" /></p>
<p>The action is the Pathfinding Behavior's Move to a Position, where the position is the Player's coordinates (we use CenterX/Y).</p>
<p>If the player is fast enough to escape to a safe distance, the Monster can be told to stop.  In this case I change the Max Speed to 0, so in the above chase trigger I reset the Max Speed back to the Behavior's default.</p>
<p>You can also make the monster have variable speeds - like it starts fast and slows down over time, or maybe based on different monster instances, or even assigned randomly.</p>
<h3>Animations</h3>
<p>You can use the Trigger and Stop chase events to set the animation of your monster.  Pathfinding kind of breaks the other movement behaviors of the Sprite, so while it's not obvious how to Flip Animation based on X Speed, you can compare the Monster's X to the Player X to make that decision.  It'll always be facing you, even if it has to run backwards to get around an obstacle to get to you...</p>
<p><img alt="" src="images/pathfindingFlip.png" /></p>
<h2>Creating Hidden Paths</h2>
<h3>Instance Variables</h3>
<p>Each instance of the monster needs to remember which direction it is moving towards.
To do that, we'll make use of an <strong>Instance Variable</strong>.
Unlike <strong>Scene Variables</strong> which are the same for all objects in the scene, an <strong>Instance Variable</strong> is different for every instance.
This allows us to have multiple monsters, each moving in a different direction.</p>
<p>Select the monster, then click on <strong>Instance Variable</strong>...</p>
<p><img alt="" src="images/instanceVariable.png" /></p>
<p>Add a new <strong>Instance Variable</strong>...</p>
<p><img alt="" src="images/addInstanceVariable.png" /></p>
<p>...set the name to <strong>direction</strong>, and the value to <strong>right</strong>.</p>
<p><img alt="" src="images/setInstanceVariable.png" /></p>
<p>Click <strong>Apply</strong> when you are done.</p>
<p>Together with some events, this will make this monster move to the right.</p>
<div class="info">
In GDevelop, the terms <strong>Object variable</strong>, <strong>Instance variable</strong>, and <strong>Object instance variable</strong> are used interchangeably.
</div>
<h3>Movement Events</h3>
<p>Start by adding a new group event and naming it <strong>Monster</strong>.
Add a sub-event, and for the condition, select the <strong>Goblin</strong> and <strong>Text of an object variable</strong>.
Set the variable name to <strong>direction</strong>, sign to <strong>= (equal to)</strong>, and value to <strong>"up"</strong>.</p>
<p>For the action, select the <strong>Goblin</strong> and <strong>Add a force (angle)</strong>.
Set the angle to <strong>270</strong> degrees, and the speed to <strong>200</strong>.</p>
<p><img alt="" src="images/goblinEvents1.png" /></p>
<p>Repeat for the other 3 remaining directions.</p>
<div class="info">
In GDevelop, 0 degrees is East, 90 degrees is South, 180 degrees is West, 270 degrees is North.
</div>

<h3>Hidden Arrows</h3>
<p>To tell the monsters which way to turn, we'll make use of some hidden objects.
Add 4 arrow objects, one for each direction, and rename them to <strong>moveUp</strong>, <strong>moveDown</strong>, <strong>moveLeft</strong>, and <strong>moveRight</strong>.
What image you use for the arrow won't matter much, as they'll be hidden at the start of the game.</p>
<p>Here I have a goblin, and I want the goblin to move around the pillar in a counter-clockwise direction....</p>
<p><img alt="" src="images/goblinMovement1.png" /></p>
<p>I'll add in the arrows pointing towards the direction I want the goblin to turn to.</p>
<p><img alt="" src="images/goblinMovement2.png" /></p>
<div class="tip">
Keep in mind that the goblin will turn as soon as it touches the arrow.
</div>

<h2>Turn Events</h2>
<p>Add another sub-event to the <strong>Monster</strong> group event.
For the condition, select the <strong>Goblin</strong>, <strong>Collision</strong>, and choose the <strong>moveUp</strong> object.
For the action, select the <strong>Goblin</strong> and <strong>Change text of variable</strong>.
Set the variable name to <strong>direction</strong>, sign to <strong>= (set to)</strong>, and value to <strong>"up"</strong>.</p>
<p><img alt="" src="images/goblinEvents2.png" /></p>
<p>Repeat for the other 3 remaining directions, then test it out and make sure the monster is moving correctly.</p>
<h3>Facing Direction</h3>
<p>You may have noticed that the monster is still facing right even when it is moving left.
To fix that, we'll need to modify the <strong>Collision with moveLeft</strong> event, by adding a <strong>Flip horizontally yes</strong> action.</p>
<p>We'll also need to flip the monster back when it is moving right, so add a <strong>Flip horizontally no</strong> action to the <strong>Collision with moveRight</strong> event.</p>
<p><img alt="" src="images/flipGoblin.png" /></p>
<h3>More Monsters!</h3>
<p>Now that you have the first monster working, continue to add more monsters throughout the game world.
This is what mine looks like...</p>
<p><img alt="" src="images/manyGoblins.png" /></p>
<h3>Hide Arrows</h3>
<p>Once you have tested it out and made sure everything is working correctly, we'll add an event to hide all the turn arrows.</p>
<p>For the condition, set it to <strong>At the start of the scene</strong>.
For the action, select the <strong>moveUp</strong> object, and choose hide.
Repeat for all the 4 arrows.</p>
<p><img alt="" src="images/hideArrows.png" /></p>
        </div>
        <button type="button" id="hamburger">
            <div id="hamburgerTop"></div>
            <div id="hamburgerBottom"></div>
        </button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            document.getElementById('hamburger').addEventListener('click', function() {
                document.getElementById('body').classList.toggle('close');
            });

            let currentEle = document.querySelector('#sidebar li.current');
            currentEle.scrollIntoView({
                behavior: 'smooth',
                block: 'center'
            });
        });
    </script>
</body>
</html>